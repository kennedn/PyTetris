$pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"]=function(h){if($pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"].__was_initialized__)return $pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"];"undefined"!=typeof $pyjs.loaded_modules["pyjamas.Canvas"]&&$pyjs.loaded_modules["pyjamas.Canvas"].__was_initialized__||$p.___import___("pyjamas.Canvas",null);var f=$pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"];f.__repr__=function(){return"<module: pyjamas.Canvas.ImageLoader>"};f.__was_initialized__=
!0;if(null===h||"undefined"==typeof h)h="pyjamas.Canvas.ImageLoader";f.__name__=h;$pyjs.loaded_modules["pyjamas.Canvas"].ImageLoader=$pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"];f.DOM=$p.___import___("pyjamas.DOM","pyjamas.Canvas",null,!1);f.Image=$p.___import___("pyjamas.ui.Image.Image","pyjamas.Canvas",null,!1);f.Event=$p.___import___("pyjamas.ui.Event","pyjamas.Canvas",null,!1);f.imageLoaders=$p.list([]);f.ImageLoader=function(){var b={},e;b.__module__="pyjamas.Canvas.ImageLoader";e=$pyjs__bind_method2("__init__",
function(a){a=!0===this.__is_instance__?this:a;a.images=$p.list([]);a.callBack=null;a.loadedImages=0;a.totalImages=0;a.onImageLoad=a.onLoad;return null},1,[null,null,["self"]]);b.__init__=e;e=$pyjs__bind_method2("addHandle",function(a,b){if(!0===this.__is_instance__)var c=this;else c=a,a=b;c.totalImages+=1;c.images.append(a);return null},1,[null,null,["self"],["img"]]);b.addHandle=e;e=$pyjs__bind_method2("dispatchIfComplete",function(a){a=!0===this.__is_instance__?this:a;var b,c,d;if(null===(c=(null===
(d=b=null!==a.callBack)||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1)?a.isAllLoaded():b)||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1)a.callBack.onImagesLoaded(a.images),f.imageLoaders.remove(a);return null},1,[null,null,["self"]]);b.dispatchIfComplete=e;e=$pyjs__bind_method2("finalize",function(a,b){if(!0===this.__is_instance__)var c=
this;else c=a,a=b;c.callBack=a;return null},1,[null,null,["self"],["cb"]]);b.finalize=e;e=$pyjs__bind_method2("incrementLoadedImages",function(a){a=!0===this.__is_instance__?this:a;a.loadedImages+=1;return null},1,[null,null,["self"]]);b.incrementLoadedImages=e;e=$pyjs__bind_method2("isAllLoaded",function(a){a=!0===this.__is_instance__?this:a;var b,c;return(c=a.loadedImages)===(b=a.totalImages)&&null===c?!0:null===c?!1:null===b?!1:"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.__cmp__?
"object"!=typeof b&&"function"!=typeof b||"function"!=typeof b.__cmp__?c==b:0===b.__cmp__(c):0===c.__cmp__(b)},1,[null,null,["self"]]);b.isAllLoaded=e;e=$pyjs__bind_method2("prepareImage",function(a,b){var c=!0===this.__is_instance__?this:a,d;d=f.Image();d.__isLoaded=!1;d.addLoadListener(c);f.DOM.setEventListener(d.getElement(),d);f.DOM.sinkEvents(d.getElement(),f.Event.ONLOAD);return d},1,[null,null,["self"],["url"]]);b.prepareImage=e;e=$pyjs__bind_method2("onLoad",function(a,b){if(!0===this.__is_instance__)var c=
this;else c=a,a=b;var d,e;if(null===(e=!(null===(d=a.__isLoaded)||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1))||!1===e||0===e||""===e?0:"object"==typeof e?"function"==typeof e.__nonzero__?e.__nonzero__():"function"==typeof e.__len__?0<e.__len__():1:1)a.__isLoaded=!0,c.incrementLoadedImages(),a.removeLoadListener(c);c.dispatchIfComplete();return a},1,[null,null,["self"],["img"]]);b.onLoad=e;e=Array(pyjslib.object);
var g=$p.dict(),l;for(l in b)g.__setitem__(l,b[l]);return $p._create_class("ImageLoader",$p.tuple(e),g)}();f.loadImages=function(b,e){var g,l,a,m,c,d,n,h,p,k,q,r;a=f.ImageLoader();g=$p.range(null===b?0:"undefined"!=typeof b.__array?b.__array.length:"function"==typeof b.__len__?b.__len__():"undefined"!=typeof b.length?b.length:$p.len(b));"undefined"!=typeof(c=g.__array)?q=0:(g=g.__iter__(),q="undefined"!=typeof(c=g.__array)?0:"function"==typeof g.$genfunc?1:-1);for(r=0;"undefined"!=typeof(d=q?0<q?
g.next(!0,!1):$p.wrapped_next(g):c[r++]);)a.addHandle(a.prepareImage("undefined"!=typeof(k=b).__array?"undefined"!=typeof k.__array[n=d]?k.__array[n]:k.__getitem__(n):k.__getitem__(d)));a.finalize(e);f.imageLoaders.append(a);c=$p.range(null===b?0:"undefined"!=typeof b.__array?b.__array.length:"function"==typeof b.__len__?b.__len__():"undefined"!=typeof b.length?b.length:$p.len(b));"undefined"!=typeof(k=c.__array)?g=0:(c=c.__iter__(),g="undefined"!=typeof(k=c.__array)?0:"function"==typeof c.$genfunc?
1:-1);for(n=0;"undefined"!=typeof(d=g?0<g?c.next(!0,!1):$p.wrapped_next(c):k[n++]);)("undefined"!=typeof(p=a.images).__array?"undefined"!=typeof p.__array[h=d]?p.__array[h]:p.__getitem__(h):p.__getitem__(d)).setUrl("undefined"!=typeof(m=b).__array?"undefined"!=typeof m.__array[l=d]?m.__array[l]:m.__getitem__(l):m.__getitem__(d));return null};f.loadImages.__name__="loadImages";f.loadImages.__bind_type__=0;f.loadImages.__args__=[null,null,["urls"],["cb"]];return this};
