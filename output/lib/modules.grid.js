$pyjs.loaded_modules["modules.grid"]=function(I){if($pyjs.loaded_modules["modules.grid"].__was_initialized__)return $pyjs.loaded_modules["modules.grid"];"undefined"!=typeof $pyjs.loaded_modules.modules&&$pyjs.loaded_modules.modules.__was_initialized__||$p.___import___("modules",null);var l=$pyjs.loaded_modules["modules.grid"];l.__repr__=function(){return"<module: modules.grid>"};l.__was_initialized__=!0;if(null===I||"undefined"==typeof I)I="modules.grid";l.__name__=I;$pyjs.loaded_modules.modules.grid=
$pyjs.loaded_modules["modules.grid"];l.Block=$p.___import___("modules.block.Block","modules",null,!1);l.random=$p.___import___("random","modules");$p.__import_all__("modules.globals","modules",l,null,!1);l.clamp=$p.___import___("modules.polyfill.clamp","modules",null,!1);l.Grid=function(){var n={},k;n.__module__="modules.grid";k=$pyjs__bind_method2("__init__",function(b,c){if(!0===this.__is_instance__)var a=this;else a=b,b=c;a.display=b;a.screen=l.pygame.Surface($p.tuple([(("undefined"==typeof BLOCK_WIDTH?
l.BLOCK_WIDTH:BLOCK_WIDTH)+1)*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE),(("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT)+1)*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)]));a.screen.fill("undefined"==typeof BACK_COLOR?l.BACK_COLOR:BACK_COLOR);a.counter=0;a.last_moved=0;a.locked=!1;a.tetris_lines=$p.list([]);a.score=0;a.level=1;a.lines=0;a.changed_values=$p.list([]);a._set_tick();a.GridState_PLAYING=0;a.GridState_GAMEOVER=1;a.GridState_TETRIS=2;a.state=a.GridState_PLAYING;
a.grid=function(){var a,b,c,e,h;b=$p.list();c=$p.range("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT);"undefined"!=typeof(h=c.__array)?a=0:(c=c.__iter__(),a="undefined"!=typeof(h=c.__array)?0:"function"==typeof c.$genfunc?1:-1);for(e=0;"undefined"!=typeof(a?0<a?c.next(!0,!1):$p.wrapped_next(c):h[e++]);)b.append(function(){var a,b,c,d,e;c=$p.list();b=$p.range("undefined"==typeof BLOCK_WIDTH?l.BLOCK_WIDTH:BLOCK_WIDTH);"undefined"!=typeof(e=b.__array)?a=0:(b=b.__iter__(),a="undefined"!=
typeof(e=b.__array)?0:"function"==typeof b.$genfunc?1:-1);for(d=0;"undefined"!=typeof(a?0<a?b.next(!0,!1):$p.wrapped_next(b):e[d++]);)c.append(0);return c}());return b}();a.block_list=$p.list($p.range(1,8));a.current_block=null;a.next_block=null;a._create_block();return null},1,[null,null,["self"],["display"]]);n.__init__=k;k=$pyjs__bind_method2("_create_block",function(b){b=!0===this.__is_instance__?this:b;var c,a,d;(null===(c=null!==b.next_block)||!1===c||0===c||""===c?0:"object"==typeof c?"function"==
typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1)?b.current_block=b.next_block:b.current_block=l.Block(b.screen,b.block_list.pop(l.random.randint(0,(null===(d=b.block_list)?0:"undefined"!=typeof d.__array?d.__array.length:"function"==typeof d.__len__?d.__len__():"undefined"!=typeof d.length?d.length:$p.len(d))-1)));b.next_block=l.Block(b.screen,b.block_list.pop(l.random.randint(0,(null===(a=b.block_list)?0:"undefined"!=typeof a.__array?a.__array.length:"function"==
typeof a.__len__?a.__len__():"undefined"!=typeof a.length?a.length:$p.len(a))-1)));b.locked=!1;return null},1,[null,null,["self"]]);n._create_block=k;k=$pyjs__bind_method2("_map_block",function(b,c){if(!0===this.__is_instance__)var a=this;else a=b,b=c;var d,f,g,e,h,q,p,m,l,r,k,y,A,t,B,u,v,x,s;p=$p.range(null===(q="undefined"!=typeof(d=b.matrix).__array?"undefined"!=typeof d.__array[0]?d.__array[0]:d.__getitem__(0):d.__getitem__(0))?0:"undefined"!=typeof q.__array?q.__array.length:"function"==typeof q.__len__?
q.__len__():"undefined"!=typeof q.length?q.length:$p.len(q));"undefined"!=typeof(d=p.__array)?A=0:(p=p.__iter__(),A="undefined"!=typeof(d=p.__array)?0:"function"==typeof p.$genfunc?1:-1);for(q=0;"undefined"!=typeof(g=A?0<A?p.next(!0,!1):$p.wrapped_next(p):d[q++]);)for(k=g,e=$p.range(null===(x=b.matrix)?0:"undefined"!=typeof x.__array?x.__array.length:"function"==typeof x.__len__?x.__len__():"undefined"!=typeof x.length?x.length:$p.len(x)),"undefined"!=typeof(s=e.__array)?g=0:(e=e.__iter__(),g="undefined"!=
typeof(s=e.__array)?0:"function"==typeof e.$genfunc?1:-1),v=0;"undefined"!=typeof(u=g?0<g?e.next(!0,!1):$p.wrapped_next(e):s[v++]);)(null===(r=!(0===(l="undefined"!=typeof(m="undefined"!=typeof(B=b.matrix).__array?"undefined"!=typeof B.__array[h=k]?B.__array[h]:B.__getitem__(h):B.__getitem__(k)).__array?"undefined"!=typeof m.__array[f=u]?m.__array[f]:m.__getitem__(f):m.__getitem__(u))&&null===l||(null===l?0:"object"!=typeof l&&"function"!=typeof l||"function"!=typeof l.__cmp__?0==l:0===l.__cmp__(0))))||
!1===r||0===r||""===r?0:"object"==typeof r?"function"==typeof r.__nonzero__?r.__nonzero__():"function"==typeof r.__len__?0<r.__len__():1:1)&&("undefined"!=typeof(t=a.grid).__array?"undefined"!=typeof t.__array[y=b.get_relative_y(k)]?t.__array[y]:t.__getitem__(y):t.__getitem__(b.get_relative_y(k))).__setitem__(b.get_relative_x(u),b.block_type);return null},1,[null,null,["self"],["block"]]);n._map_block=k;k=$pyjs__bind_method2("_check_tetris",function(b){var c=!0===this.__is_instance__?this:b,a,d,f,
g,e,h,q,p,m,F,r,k,y,A,t,B,u,v,x,s,z,n,aa,Q,M,H,N,E,D,C,w,J,I,T,X,W,U,Y,Z,K,R,L,O,S,G,$;if(null===(e=!((m=c.state)===(L=c.GridState_TETRIS)&&null===m||(null===m?0:null===L?0:"object"!=typeof m&&"function"!=typeof m||"function"!=typeof m.__cmp__?"object"!=typeof L&&"function"!=typeof L||"function"!=typeof L.__cmp__?m==L:0===L.__cmp__(m):0===m.__cmp__(L))))||!1===e||0===e||""===e?0:"object"==typeof e?"function"==typeof e.__nonzero__?e.__nonzero__():"function"==typeof e.__len__?0<e.__len__():1:1){f=$p.range(null===
(C=c.grid)?0:"undefined"!=typeof C.__array?C.__array.length:"function"==typeof C.__len__?C.__len__():"undefined"!=typeof C.length?C.length:$p.len(C));"undefined"!=typeof(r=f.__array)?t=0:(f=f.__iter__(),t="undefined"!=typeof(r=f.__array)?0:"function"==typeof f.$genfunc?1:-1);for(a=0;"undefined"!=typeof(F=t?0<t?f.next(!0,!1):$p.wrapped_next(f):r[a++]);)G=F,(null===(g=$p.all(function(){var a=[0],b=null,e=null,f=!1,g=function(){};g.next=function(c){var d;b=e=null;try{if(d=g.$genfunc(),f=!1,"undefined"==
typeof d){if(!0===c){a[0]=-1;return}throw $p.StopIteration();}}catch(h){f=!1;a[0]=-1;if(!0===c&&$p.isinstance(h,$p.StopIteration))return;throw h;}return d};g.__iter__=function(){return g};g.send=function(c){b=c;e=null;try{var d=g.$genfunc();if("undefined"==typeof d)throw $p.StopIteration();}catch(h){throw a[0]=-1,f=!1,h;}f=!1;return d};g.$$throw=function(c,d){b=null;e="undefined"==typeof d?c():$p.isinstance(d,c)?d:c(d);try{var h=g.$genfunc()}catch(q){throw a[0]=-1,f=!1,q;}f=!1;return h};g.close=function(){b=
null;e=$p.GeneratorExit();try{var c=g.$genfunc();f=!1;if("undefined"!=typeof c)throw $p.RuntimeError("generator ignored GeneratorExit");}catch(d){a[0]=-1;f=!1;if($p.isinstance(d,$p.StopIteration)||$p.isinstance(d,$p.GeneratorExit))return null;throw d;}return null};g.$genfunc=function(){if(f)throw $p.ValueError("generator already executing");f=!0;if("undefined"==typeof a[0]||0===a[0]){for(var g=0;g<(2>a.length?2:a.length);g++)a[g]=0;if("undefined"!=typeof e&&null!==e)throw a[0]=-1,e;k="undefined"!=
typeof(d=c.grid).__array?"undefined"!=typeof d.__array[aa=G]?d.__array[aa]:d.__getitem__(aa):d.__getitem__(G);"undefined"!=typeof(h=k.__array)?B=0:(k=k.__iter__(),B="undefined"!=typeof(h=k.__array)?0:"function"==typeof k.$genfunc?1:-1);A=0;a[0]=1}1==a[0]&&(a[1]=0,a[0]=2);if(2==a[0]){for(;0<a[1]||"undefined"!=typeof(I=B?0<B?k.next(!0,!1):$p.wrapped_next(k):h[A++]);a[1]=0){if("undefined"==typeof a[1]||0===a[1]){for(g=1;g<(3>a.length?3:a.length);g++)a[g]=0;y=I;b=!(0===(O=y)&&null===O||(null===O?0:"object"!=
typeof O&&"function"!=typeof O||"function"!=typeof O.__cmp__?0==O:0===O.__cmp__(0)));a[1]=1;return b}if(1==a[1]){if("undefined"!=typeof e&&null!==e)throw a[1]=-1,e;a[1]=2}}a[0]=3}3==a[0]&&(a[0]=4)};return g}()))||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?0<g.__len__():1:1)&&c.tetris_lines.append(G);if(null===(p=1==(0===(S=null===(v=c.tetris_lines)?0:"undefined"!=typeof v.__array?v.__array.length:"function"==typeof v.__len__?
v.__len__():"undefined"!=typeof v.length?v.length:$p.len(v))?0:"number"!=typeof S||"number"!=typeof S&&"string"!=typeof S&&"boolean"!=typeof S?$p.cmp(S,0):0==S?0:0>S?-1:1))||!1===p||0===p||""===p?0:"object"==typeof p?"function"==typeof p.__nonzero__?p.__nonzero__():"function"==typeof p.__len__?0<p.__len__():1:1)c.state=c.GridState_TETRIS}else if(null===(q=(R=c.state)===(u=c.GridState_TETRIS)&&null===R?!0:null===R?!1:null===u?!1:"object"!=typeof R&&"function"!=typeof R||"function"!=typeof R.__cmp__?
"object"!=typeof u&&"function"!=typeof u||"function"!=typeof u.__cmp__?R==u:0===u.__cmp__(R):0===R.__cmp__(u))||!1===q||0===q||""===q?0:"object"==typeof q?"function"==typeof q.__nonzero__?q.__nonzero__():"function"==typeof q.__len__?0<q.__len__():1:1){p=!0;v=c.tetris_lines;"undefined"!=typeof(C=v.__array)?g=0:(v=v.__iter__(),g="undefined"!=typeof(C=v.__array)?0:"function"==typeof v.$genfunc?1:-1);for(S=0;"undefined"!=typeof(b=g?0<g?v.next(!0,!1):$p.wrapped_next(v):C[S++]);)for(G=b,b=$p.range($p.float_int(Math.floor((null===
(D="undefined"!=typeof(Q=c.grid).__array?"undefined"!=typeof Q.__array[M=G]?Q.__array[M]:Q.__getitem__(M):Q.__getitem__(G))?0:"undefined"!=typeof D.__array?D.__array.length:"function"==typeof D.__len__?D.__len__():"undefined"!=typeof D.length?D.length:$p.len(D))/2)-1)),"undefined"!=typeof(q=b.__array)?e=0:(b=b.__iter__(),e="undefined"!=typeof(q=b.__array)?0:"function"==typeof b.$genfunc?1:-1),u=0;"undefined"!=typeof(m=e?0<e?b.next(!0,!1):$p.wrapped_next(b):q[u++]);)if(null===(f=!(0===(K="undefined"!=
typeof(n="undefined"!=typeof(H=c.grid).__array?"undefined"!=typeof H.__array[x=G]?H.__array[x]:H.__getitem__(x):H.__getitem__(G)).__array?"undefined"!=typeof n.__array[N=Math.floor((null===(w="undefined"!=typeof(s=c.grid).__array?"undefined"!=typeof s.__array[z=G]?s.__array[z]:s.__getitem__(z):s.__getitem__(G))?0:"undefined"!=typeof w.__array?w.__array.length:"function"==typeof w.__len__?w.__len__():"undefined"!=typeof w.length?w.length:$p.len(w))/2)+m]?n.__array[N]:n.__getitem__(N):n.__getitem__(Math.floor((null===
(w="undefined"!=typeof(s=c.grid).__array?"undefined"!=typeof s.__array[z=G]?s.__array[z]:s.__getitem__(z):s.__getitem__(G))?0:"undefined"!=typeof w.__array?w.__array.length:"function"==typeof w.__len__?w.__len__():"undefined"!=typeof w.length?w.length:$p.len(w))/2)+m))&&null===K||(null===K?0:"object"!=typeof K&&"function"!=typeof K||"function"!=typeof K.__cmp__?0==K:0===K.__cmp__(0))))||!1===f||0===f||""===f?0:"object"==typeof f?"function"==typeof f.__nonzero__?f.__nonzero__():"function"==typeof f.__len__?
0<f.__len__():1:1){("undefined"!=typeof(E=c.grid).__array?"undefined"!=typeof E.__array[X=G]?E.__array[X]:E.__getitem__(X):E.__getitem__(G)).__setitem__(Math.floor((null===(J="undefined"!=typeof(T=c.grid).__array?"undefined"!=typeof T.__array[W=G]?T.__array[W]:T.__getitem__(W):T.__getitem__(G))?0:"undefined"!=typeof J.__array?J.__array.length:"function"==typeof J.__len__?J.__len__():"undefined"!=typeof J.length?J.length:$p.len(J))/2)+m,0);("undefined"!=typeof($=c.grid).__array?"undefined"!=typeof $.__array[Y=
G]?$.__array[Y]:$.__getitem__(Y):$.__getitem__(G)).__setitem__(Math.floor((null===(F="undefined"!=typeof(U=c.grid).__array?"undefined"!=typeof U.__array[Z=G]?U.__array[Z]:U.__getitem__(Z):U.__getitem__(G))?0:"undefined"!=typeof F.__array?F.__array.length:"function"==typeof F.__len__?F.__len__():"undefined"!=typeof F.length?F.length:$p.len(F))/2)-1-m,0);p=!1;break}if(null===(a=p)||!1===a||0===a||""===a?0:"object"==typeof a?"function"==typeof a.__nonzero__?a.__nonzero__():"function"==typeof a.__len__?
0<a.__len__():1:1){c.lines+=c._calc_lines(null===(r=c.tetris_lines)?0:"undefined"!=typeof r.__array?r.__array.length:"function"==typeof r.__len__?r.__len__():"undefined"!=typeof r.length?r.length:$p.len(r));c.score+=c._calc_score(null===(t=c.tetris_lines)?0:"undefined"!=typeof t.__array?t.__array.length:"function"==typeof t.__len__?t.__len__():"undefined"!=typeof t.length?t.length:$p.len(t));f=c.tetris_lines;"undefined"!=typeof(r=f.__array)?F=0:(f=f.__iter__(),F="undefined"!=typeof(r=f.__array)?0:
"function"==typeof f.$genfunc?1:-1);for(t=0;"undefined"!=typeof(a=F?0<F?f.next(!0,!1):$p.wrapped_next(f):r[t++]);)G=a,c.grid.pop(G),c.grid.insert(0,function(){var a,b,c,d,e;b=$p.list();e=$p.range("undefined"==typeof BLOCK_WIDTH?l.BLOCK_WIDTH:BLOCK_WIDTH);"undefined"!=typeof(c=e.__array)?d=0:(e=e.__iter__(),d="undefined"!=typeof(c=e.__array)?0:"function"==typeof e.$genfunc?1:-1);for(a=0;"undefined"!=typeof(d?0<d?e.next(!0,!1):$p.wrapped_next(e):c[a++]);)b.append(0);return b}());c.tetris_lines=$p.list([]);
c.state=c.GridState_PLAYING}}return null},1,[null,null,["self"]]);n._check_tetris=k;k=$pyjs__bind_method2("_set_tick",function(b){b=!0===this.__is_instance__?this:b;var c,a;b.tick=1E3*Math.pow(0.8-0.007*(b.level-1),b.level-1);null===(a=1==((2===(c="undefined"==typeof DEBUG?l.DEBUG:DEBUG)?0:"number"!=typeof c||"number"!=typeof c&&"string"!=typeof c&&"boolean"!=typeof c?$p.cmp(c,2):2==c?0:2>c?-1:1)|1))||!1===a||0===a||""===a||"object"==typeof a&&("function"==typeof a.__nonzero__?a.__nonzero__():"function"==
typeof a.__len__&&a.__len__());return null},1,[null,null,["self"]]);n._set_tick=k;k=$pyjs__bind_method2("_check_levelup",function(b){b=!0===this.__is_instance__?this:b;var c,a,d;if(null===(d=1==(((c=b.lines)===(a=5*b.level)?0:typeof c!=typeof a||"number"!=typeof c&&"string"!=typeof c&&"boolean"!=typeof c?$p.cmp(c,a):c==a?0:c<a?-1:1)|1))||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1)b.level+=1,b._set_tick();
return null},1,[null,null,["self"]]);n._check_levelup=k;k=$pyjs__bind_method2("_colliding",function(b,c,a,d){if(!0===this.__is_instance__)var f=this;else f=arguments[0],b=arguments[1],c=arguments[2],a=arguments[3],d=arguments[4];"undefined"==typeof d&&(d=arguments.callee.__args__[6][1]);var g,e,h,q,p,m,k,r,n,y,A,t,B,u,v,x,s,z,P,I,Q,M,H,N,E,D,C,w,J,V,T,X,W,U,Y,Z,K,R,L,O,S;if(null===(q=!(null===(h=d)||!1===h||0===h||""===h?0:"object"==typeof h?"function"==typeof h.__nonzero__?h.__nonzero__():"function"==
typeof h.__len__?0<h.__len__():1:1))||!1===q||0===q||""===q?0:"object"==typeof q?"function"==typeof q.__nonzero__?q.__nonzero__():"function"==typeof q.__len__?0<q.__len__():1:1)d=b.matrix;h=$p.range(null===(D="undefined"!=typeof(P=d).__array?"undefined"!=typeof P.__array[0]?P.__array[0]:P.__getitem__(0):P.__getitem__(0))?0:"undefined"!=typeof D.__array?D.__array.length:"function"==typeof D.__len__?D.__len__():"undefined"!=typeof D.length?D.length:$p.len(D));"undefined"!=typeof(D=h.__array)?q=0:(h=
h.__iter__(),q="undefined"!=typeof(D=h.__array)?0:"function"==typeof h.$genfunc?1:-1);for(P=0;"undefined"!=typeof(H=q?0<q?h.next(!0,!1):$p.wrapped_next(h):D[P++]);)for(L=H,K=$p.range(null===(J=d)?0:"undefined"!=typeof J.__array?J.__array.length:"function"==typeof J.__len__?J.__len__():"undefined"!=typeof J.length?J.length:$p.len(J)),"undefined"!=typeof(H=K.__array)?U=0:(K=K.__iter__(),U="undefined"!=typeof(H=K.__array)?0:"function"==typeof K.$genfunc?1:-1),S=0;"undefined"!=typeof(O=U?0<U?K.next(!0,
!1):$p.wrapped_next(K):H[S++]);)if((null===(m=(null===(p=Q=!(0===(A="undefined"!=typeof(t="undefined"!=typeof(x=d).__array?"undefined"!=typeof x.__array[Z=L]?x.__array[Z]:x.__getitem__(Z):x.__getitem__(L)).__array?"undefined"!=typeof t.__array[Y=O]?t.__array[Y]:t.__getitem__(Y):t.__getitem__(O))&&null===A||(null===A?0:"object"!=typeof A&&"function"!=typeof A||"function"!=typeof A.__cmp__?0==A:0===A.__cmp__(0))))||!1===p||0===p||""===p?0:"object"==typeof p?"function"==typeof p.__nonzero__?p.__nonzero__():
"function"==typeof p.__len__?0<p.__len__():1:1)?!(0===(s="undefined"!=typeof(e="undefined"!=typeof(n=f.grid).__array?"undefined"!=typeof n.__array[R=l.clamp(0,("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT)-1,b.get_relative_y(L+a))]?n.__array[R]:n.__getitem__(R):n.__getitem__(l.clamp(0,("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT)-1,b.get_relative_y(L+a)))).__array?"undefined"!=typeof e.__array[X=l.clamp(0,("undefined"==typeof BLOCK_WIDTH?l.BLOCK_WIDTH:BLOCK_WIDTH)-
1,b.get_relative_x(O+c))]?e.__array[X]:e.__getitem__(X):e.__getitem__(l.clamp(0,("undefined"==typeof BLOCK_WIDTH?l.BLOCK_WIDTH:BLOCK_WIDTH)-1,b.get_relative_x(O+c))))&&null===s||(null===s?0:"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.__cmp__?0==s:0===s.__cmp__(0))):Q)||!1===m||0===m||""===m?0:"object"==typeof m?"function"==typeof m.__nonzero__?m.__nonzero__():"function"==typeof m.__len__?0<m.__len__():1:1)||(null===(g=(null===(k=M=(B=b.matrix)===(u=d)&&null===B?!0:null===B?!1:null===
u?!1:"object"!=typeof B&&"function"!=typeof B||"function"!=typeof B.__cmp__?"object"!=typeof u&&"function"!=typeof u||"function"!=typeof u.__cmp__?B==u:0===u.__cmp__(B):0===B.__cmp__(u))||!1===k||0===k||""===k?0:"object"==typeof k?"function"==typeof k.__nonzero__?k.__nonzero__():"function"==typeof k.__len__?0<k.__len__():1:1)?(null===(r=I=!(0===(v=a)&&null===v||(null===v?0:"object"!=typeof v&&"function"!=typeof v||"function"!=typeof v.__cmp__?0==v:0===v.__cmp__(0))))||!1===r||0===r||""===r?0:"object"==
typeof r?"function"==typeof r.__nonzero__?r.__nonzero__():"function"==typeof r.__len__?0<r.__len__():1:1)?(null===(C=E=!(0===(y="undefined"!=typeof(T="undefined"!=typeof(W=d).__array?"undefined"!=typeof W.__array[V=L]?W.__array[V]:W.__getitem__(V):W.__getitem__(L)).__array?"undefined"!=typeof T.__array[N=O]?T.__array[N]:T.__getitem__(N):T.__getitem__(O))&&null===y||(null===y?0:"object"!=typeof y&&"function"!=typeof y||"function"!=typeof y.__cmp__?0==y:0===y.__cmp__(0))))||!1===C||0===C||""===C?0:
"object"==typeof C?"function"==typeof C.__nonzero__?C.__nonzero__():"function"==typeof C.__len__?0<C.__len__():1:1)?1==(((w=b.get_relative_y(L))===(z=("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT)-1)?0:typeof w!=typeof z||"number"!=typeof w&&"string"!=typeof w&&"boolean"!=typeof w?$p.cmp(w,z):w==z?0:w<z?-1:1)|1):E:I:M)||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?0<g.__len__():1:1))return!0;return!1},1,[null,
null,["self"],["block"],["x_modifier"],["y_modifier"],["block_matrix",0]]);n._colliding=k;k=$pyjs__bind_method2("_calc_score",function(b,c){if(!0===this.__is_instance__)var a=this;else a=b,b=c;var d,f,g,e,h,q,l,m;return(null===(d=1===(h=b)&&null===h?!0:null===h?!1:"object"!=typeof h&&"function"!=typeof h||"function"!=typeof h.__cmp__?1==h:0===h.__cmp__(1))||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1)?40*
(a.level+1):(null===(g=2===(q=b)&&null===q?!0:null===q?!1:"object"!=typeof q&&"function"!=typeof q||"function"!=typeof q.__cmp__?2==q:0===q.__cmp__(2))||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?0<g.__len__():1:1)?100*(a.level+1):(null===(f=3===(l=b)&&null===l?!0:null===l?!1:"object"!=typeof l&&"function"!=typeof l||"function"!=typeof l.__cmp__?3==l:0===l.__cmp__(3))||!1===f||0===f||""===f?0:"object"==typeof f?"function"==
typeof f.__nonzero__?f.__nonzero__():"function"==typeof f.__len__?0<f.__len__():1:1)?300*(a.level+1):(null===(e=4===(m=b)&&null===m?!0:null===m?!1:"object"!=typeof m&&"function"!=typeof m||"function"!=typeof m.__cmp__?4==m:0===m.__cmp__(4))||!1===e||0===e||""===e?0:"object"==typeof e?"function"==typeof e.__nonzero__?e.__nonzero__():"function"==typeof e.__len__?0<e.__len__():1:1)?1200*(a.level+1):0},1,[null,null,["self"],["lines"]]);n._calc_score=k;k=$pyjs__bind_method2("_calc_lines",function(b,c){!0!==
this.__is_instance__&&(b=c);var a,d,f,g,e,h,l,k;return(null===(h=1===(k=b)&&null===k?!0:null===k?!1:"object"!=typeof k&&"function"!=typeof k||"function"!=typeof k.__cmp__?1==k:0===k.__cmp__(1))||!1===h||0===h||""===h?0:"object"==typeof h?"function"==typeof h.__nonzero__?h.__nonzero__():"function"==typeof h.__len__?0<h.__len__():1:1)?1:(null===(f=2===(g=b)&&null===g?!0:null===g?!1:"object"!=typeof g&&"function"!=typeof g||"function"!=typeof g.__cmp__?2==g:0===g.__cmp__(2))||!1===f||0===f||""===f?0:
"object"==typeof f?"function"==typeof f.__nonzero__?f.__nonzero__():"function"==typeof f.__len__?0<f.__len__():1:1)?3:(null===(a=3===(d=b)&&null===d?!0:null===d?!1:"object"!=typeof d&&"function"!=typeof d||"function"!=typeof d.__cmp__?3==d:0===d.__cmp__(3))||!1===a||0===a||""===a?0:"object"==typeof a?"function"==typeof a.__nonzero__?a.__nonzero__():"function"==typeof a.__len__?0<a.__len__():1:1)?5:(null===(e=4===(l=b)&&null===l?!0:null===l?!1:"object"!=typeof l&&"function"!=typeof l||"function"!=
typeof l.__cmp__?4==l:0===l.__cmp__(4))||!1===e||0===e||""===e?0:"object"==typeof e?"function"==typeof e.__nonzero__?e.__nonzero__():"function"==typeof e.__len__?0<e.__len__():1:1)?8:0},1,[null,null,["self"],["lines"]]);n._calc_lines=k;k=$pyjs__bind_method2("rotate_block",function(b){if(!0===this.__is_instance__)var c=this;else c=arguments[0],b=arguments[1];"undefined"==typeof b&&(b=arguments.callee.__args__[3][1]);var a,d,f,g,e,h,k,p;d=l.Block(c.display,c.current_block.block_type);d.matrix=c.current_block.matrix;
d.position=c.current_block.position;(null===(g=!(null===(h=b)||!1===h||0===h||""===h?0:"object"==typeof h?"function"==typeof h.__nonzero__?h.__nonzero__():"function"==typeof h.__len__?0<h.__len__():1:1))||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?0<g.__len__():1:1)?d._rotate_right():d._rotate_left();h=$p.range($p.max(0,d.get_relative_y(null===(a=d.matrix)?0:"undefined"!=typeof a.__array?a.__array.length:"function"==typeof a.__len__?
a.__len__():"undefined"!=typeof a.length?a.length:$p.len(a))-("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT)));"undefined"!=typeof(g=h.__array)?p=0:(h=h.__iter__(),p="undefined"!=typeof(g=h.__array)?0:"function"==typeof h.$genfunc?1:-1);for(a=0;"undefined"!=typeof(p?0<p?h.next(!0,!1):$p.wrapped_next(h):g[a++]);)d.move_up();h=$p.range($p.max(0,d.get_relative_x(null===(e="undefined"!=typeof(f=d.matrix).__array?"undefined"!=typeof f.__array[0]?f.__array[0]:f.__getitem__(0):f.__getitem__(0))?
0:"undefined"!=typeof e.__array?e.__array.length:"function"==typeof e.__len__?e.__len__():"undefined"!=typeof e.length?e.length:$p.len(e))-("undefined"==typeof BLOCK_WIDTH?l.BLOCK_WIDTH:BLOCK_WIDTH)));"undefined"!=typeof(f=h.__array)?e=0:(h=h.__iter__(),e="undefined"!=typeof(f=h.__array)?0:"function"==typeof h.$genfunc?1:-1);for(a=0;"undefined"!=typeof(e?0<e?h.next(!0,!1):$p.wrapped_next(h):f[a++]);)d.move_left();e=$p.range($p.abs($p.min(0,d.get_relative_x(0))));"undefined"!=typeof(h=e.__array)?a=
0:(e=e.__iter__(),a="undefined"!=typeof(h=e.__array)?0:"function"==typeof e.$genfunc?1:-1);for(f=0;"undefined"!=typeof(a?0<a?e.next(!0,!1):$p.wrapped_next(e):h[f++]);)d.move_right();if(null===(k=c._colliding(d,0,0,d.matrix))||!1===k||0===k||""===k?0:"object"==typeof k?"function"==typeof k.__nonzero__?k.__nonzero__():"function"==typeof k.__len__?0<k.__len__():1:1)return null;c.current_block.position=d.position;c.current_block.matrix=d.matrix;c.last_moved=0;return null},1,[null,null,["self"],["reverse",
!1]]);n.rotate_block=k;k=$pyjs__bind_method2("move_block_left",function(b){b=!0===this.__is_instance__?this:b;var c,a;if(null===(c=!(null===(a=b._colliding(b.current_block,-1,0))||!1===a||0===a||""===a?0:"object"==typeof a?"function"==typeof a.__nonzero__?a.__nonzero__():"function"==typeof a.__len__?0<a.__len__():1:1))||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1)b.current_block.move_left(),b.last_moved=
0;return null},1,[null,null,["self"]]);n.move_block_left=k;k=$pyjs__bind_method2("move_block_right",function(b){b=!0===this.__is_instance__?this:b;var c,a;if(null===(a=!(null===(c=b._colliding(b.current_block,1,0))||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1))||!1===a||0===a||""===a?0:"object"==typeof a?"function"==typeof a.__nonzero__?a.__nonzero__():"function"==typeof a.__len__?0<a.__len__():1:1)b.current_block.move_right(),
b.last_moved=0;return null},1,[null,null,["self"]]);n.move_block_right=k;k=$pyjs__bind_method2("move_block_down",function(b){b=!0===this.__is_instance__?this:b;var c,a;(null===(a=!(null===(c=b._colliding(b.current_block,0,1))||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1))||!1===a||0===a||""===a?0:"object"==typeof a?"function"==typeof a.__nonzero__?a.__nonzero__():"function"==typeof a.__len__?0<a.__len__():
1:1)&&b.current_block.move_down();return null},1,[null,null,["self"]]);n.move_block_down=k;k=$pyjs__bind_method2("move_block_to_bottom",function(b){b=!0===this.__is_instance__?this:b;var c,a,d,f;if(null===(a=!(null===(c=b._colliding(b.current_block,0,1))||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1))||!1===a||0===a||""===a?0:"object"==typeof a?"function"==typeof a.__nonzero__?a.__nonzero__():"function"==
typeof a.__len__?0<a.__len__():1:1){b.current_block.move_down();if(null===(f=!(null===(d=b.move_block_to_bottom())||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1))||!1===f||0===f||""===f?0:"object"==typeof f?"function"==typeof f.__nonzero__?f.__nonzero__():"function"==typeof f.__len__?0<f.__len__():1:1)b.counter=b.tick,b.locked=!0;return!0}return!1},1,[null,null,["self"]]);n.move_block_to_bottom=k;k=$pyjs__bind_method2("update_block",
function(b,c,a){!0===this.__is_instance__?b=this:c=a;var d,f,g,e,h,k,p,m,F,r,n,y,A,t,B,u,v,x,s,z;if(null===(A=(f=b.state)===(e=b.GridState_PLAYING)&&null===f?!0:null===f?!1:null===e?!1:"object"!=typeof f&&"function"!=typeof f||"function"!=typeof f.__cmp__?"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.__cmp__?f==e:0===e.__cmp__(f):0===f.__cmp__(e))||!1===A||0===A||""===A?0:"object"==typeof A?"function"==typeof A.__nonzero__?A.__nonzero__():"function"==typeof A.__len__?0<A.__len__():
1:1){if(b.counter+=c,b.last_moved+=c,null===(y=1==(((z=b.counter)===(v=b.tick)?0:typeof z!=typeof v||"number"!=typeof z&&"string"!=typeof z&&"boolean"!=typeof z?$p.cmp(z,v):z==v?0:z<v?-1:1)|1))||!1===y||0===y||""===y?0:"object"==typeof y?"function"==typeof y.__nonzero__?y.__nonzero__():"function"==typeof y.__len__?0<y.__len__():1:1){b.counter=0;if(null===(r=!(null===(n=b._colliding(b.current_block,0,1))||!1===n||0===n||""===n?0:"object"==typeof n?"function"==typeof n.__nonzero__?n.__nonzero__():"function"==
typeof n.__len__?0<n.__len__():1:1))||!1===r||0===r||""===r?0:"object"==typeof r?"function"==typeof r.__nonzero__?r.__nonzero__():"function"==typeof r.__len__?0<r.__len__():1:1)b.current_block.move_down();else if(null===(m=(null===(F=g=b.locked)||!1===F||0===F||""===F?0:"object"==typeof F?"function"==typeof F.__nonzero__?F.__nonzero__():"function"==typeof F.__len__?0<F.__len__():1:1)?g:1==((u=b.last_moved)===(s=b.tick/2)?0:typeof u!=typeof s||"number"!=typeof u&&"string"!=typeof u&&"boolean"!=typeof u?
$p.cmp(u,s):u==s?0:u<s?-1:1))||!1===m||0===m||""===m?0:"object"==typeof m?"function"==typeof m.__nonzero__?m.__nonzero__():"function"==typeof m.__len__?0<m.__len__():1:1)b._map_block(b.current_block),b._check_tetris(),b._check_levelup(),b._create_block();if(null===(p=b._colliding(b.current_block,0,0))||!1===p||0===p||""===p?0:"object"==typeof p?"function"==typeof p.__nonzero__?p.__nonzero__():"function"==typeof p.__len__?0<p.__len__():1:1)b.state=b.GridState_GAMEOVER}}else if(null===(k=(h=b.state)===
(d=b.GridState_TETRIS)&&null===h?!0:null===h?!1:null===d?!1:"object"!=typeof h&&"function"!=typeof h||"function"!=typeof h.__cmp__?"object"!=typeof d&&"function"!=typeof d||"function"!=typeof d.__cmp__?h==d:0===d.__cmp__(h):0===h.__cmp__(d))||!1===k||0===k||""===k?0:"object"==typeof k?"function"==typeof k.__nonzero__?k.__nonzero__():"function"==typeof k.__len__?0<k.__len__():1:1)if(b.counter+=c*("undefined"==typeof CLEAR_SPEED?l.CLEAR_SPEED:CLEAR_SPEED),null===(t=1==(((x=b.counter)===(B=b.tick)?0:
typeof x!=typeof B||"number"!=typeof x&&"string"!=typeof x&&"boolean"!=typeof x?$p.cmp(x,B):x==B?0:x<B?-1:1)|1))||!1===t||0===t||""===t?0:"object"==typeof t?"function"==typeof t.__nonzero__?t.__nonzero__():"function"==typeof t.__len__?0<t.__len__():1:1)b.counter=0,b._check_tetris();return null},1,[null,null,["self"],["debug"],["dt"]]);n.update_block=k;k=$pyjs__bind_method2("_draw_grid",function(b,c){if(!0===this.__is_instance__)var a=this;else a=b,b=c;var d,f,g,e,h,k,p,m,n,r,I,y,A,t,B,u,v,x,s,z,P,
V,Q,M,H,N,E,D,C,w;a.screen.fill("undefined"==typeof BACK_COLOR?l.BACK_COLOR:BACK_COLOR);a.current_block.draw(b,(E=a.state)===(d=a.GridState_PLAYING)&&null===E?!0:null===E?!1:null===d?!1:"object"!=typeof E&&"function"!=typeof E||"function"!=typeof E.__cmp__?"object"!=typeof d&&"function"!=typeof d||"function"!=typeof d.__cmp__?E==d:0===d.__cmp__(E):0===E.__cmp__(d));d=$p.range((null===(s="undefined"!=typeof(e=a.grid).__array?"undefined"!=typeof e.__array[0]?e.__array[0]:e.__getitem__(0):e.__getitem__(0))?
0:"undefined"!=typeof s.__array?s.__array.length:"function"==typeof s.__len__?s.__len__():"undefined"!=typeof s.length?s.length:$p.len(s))+1);"undefined"!=typeof(P=d.__array)?E=0:(d=d.__iter__(),E="undefined"!=typeof(P=d.__array)?0:"function"==typeof d.$genfunc?1:-1);for(s=0;"undefined"!=typeof(e=E?0<E?d.next(!0,!1):$p.wrapped_next(d):P[s++]);)l.pygame.draw.line(a.screen,"undefined"==typeof GRID_COLOR?l.GRID_COLOR:GRID_COLOR,$p.list([e*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE),0]),
$p.list([e*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE),("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)*("undefined"==typeof BLOCK_HEIGHT?l.BLOCK_HEIGHT:BLOCK_HEIGHT)]),"undefined"==typeof GRID_LINE_WIDTH?l.GRID_LINE_WIDTH:GRID_LINE_WIDTH);e=$p.range((null===(m=a.grid)?0:"undefined"!=typeof m.__array?m.__array.length:"function"==typeof m.__len__?m.__len__():"undefined"!=typeof m.length?m.length:$p.len(m))+1);"undefined"!=typeof(E=e.__array)?d=0:(e=e.__iter__(),d="undefined"!=
typeof(E=e.__array)?0:"function"==typeof e.$genfunc?1:-1);for(s=0;"undefined"!=typeof(m=d?0<d?e.next(!0,!1):$p.wrapped_next(e):E[s++]);)l.pygame.draw.line(a.screen,"undefined"==typeof GRID_COLOR?l.GRID_COLOR:GRID_COLOR,$p.list([0,m*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)]),$p.list([("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)*("undefined"==typeof BLOCK_WIDTH?l.BLOCK_WIDTH:BLOCK_WIDTH),m*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)]),"undefined"==typeof GRID_LINE_WIDTH?
l.GRID_LINE_WIDTH:GRID_LINE_WIDTH);d=$p.range(null===(n=a.grid)?0:"undefined"!=typeof n.__array?n.__array.length:"function"==typeof n.__len__?n.__len__():"undefined"!=typeof n.length?n.length:$p.len(n));"undefined"!=typeof(n=d.__array)?s=0:(d=d.__iter__(),s="undefined"!=typeof(n=d.__array)?0:"function"==typeof d.$genfunc?1:-1);for(E=0;"undefined"!=typeof(e=s?0<s?d.next(!0,!1):$p.wrapped_next(d):n[E++]);)for(m=e,H=$p.range(null===(D="undefined"!=typeof(p=a.grid).__array?"undefined"!=typeof p.__array[k=
m]?p.__array[k]:p.__getitem__(k):p.__getitem__(m))?0:"undefined"!=typeof D.__array?D.__array.length:"function"==typeof D.__len__?D.__len__():"undefined"!=typeof D.length?D.length:$p.len(D)),"undefined"!=typeof(P=H.__array)?Q=0:(H=H.__iter__(),Q="undefined"!=typeof(P=H.__array)?0:"function"==typeof H.$genfunc?1:-1),V=0;"undefined"!=typeof(e=Q?0<Q?H.next(!0,!1):$p.wrapped_next(H):P[V++]);){if(null===(z=!(0===(C="undefined"!=typeof(f="undefined"!=typeof(h=a.grid).__array?"undefined"!=typeof h.__array[g=
m]?h.__array[g]:h.__getitem__(g):h.__getitem__(m)).__array?"undefined"!=typeof f.__array[I=e]?f.__array[I]:f.__getitem__(I):f.__getitem__(e))&&null===C||(null===C?0:"object"!=typeof C&&"function"!=typeof C||"function"!=typeof C.__cmp__?0==C:0===C.__cmp__(0))))||!1===z||0===z||""===z?0:"object"==typeof z?"function"==typeof z.__nonzero__?z.__nonzero__():"function"==typeof z.__len__?0<z.__len__():1:1)N=l.Block.get_rect(e,m,"undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE,"undefined"==typeof GRID_LINE_WIDTH?
l.GRID_LINE_WIDTH:GRID_LINE_WIDTH,0.6),l.pygame.draw.rect(a.screen,$p.tuple([0,0,0]),l.pygame.Rect(N.x+2,N.y+2,N.width,N.height),"undefined"==typeof BLOCK_LINE_WIDTH?l.BLOCK_LINE_WIDTH:BLOCK_LINE_WIDTH),l.pygame.draw.rect(a.screen,l.Block.get_color("undefined"!=typeof(t="undefined"!=typeof(y=a.grid).__array?"undefined"!=typeof y.__array[A=m]?y.__array[A]:y.__getitem__(A):y.__getitem__(m)).__array?"undefined"!=typeof t.__array[B=e]?t.__array[B]:t.__getitem__(B):t.__getitem__(e)),N,"undefined"==typeof BLOCK_LINE_WIDTH?
l.BLOCK_LINE_WIDTH:BLOCK_LINE_WIDTH);if(null===(M=5===(w=b)&&null===w?!0:null===w?!1:"object"!=typeof w&&"function"!=typeof w||"function"!=typeof w.__cmp__?5==w:0===w.__cmp__(5))||!1===M||0===M||""===M?0:"object"==typeof M?"function"==typeof M.__nonzero__?M.__nonzero__():"function"==typeof M.__len__?0<M.__len__():1:1)N=l.DEBUG_FONT.render($p.str("undefined"!=typeof(x="undefined"!=typeof(u=a.grid).__array?"undefined"!=typeof u.__array[v=m]?u.__array[v]:u.__getitem__(v):u.__getitem__(m)).__array?"undefined"!=
typeof x.__array[r=e]?x.__array[r]:x.__getitem__(r):x.__getitem__(e)),!0,$p.tuple([255,255,255])),a.screen.blit(N,$p.tuple([e*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)+("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)/3,m*("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)+("undefined"==typeof BLOCK_SIZE?l.BLOCK_SIZE:BLOCK_SIZE)/3.5]));a.display.blit(a.screen,$p.tuple([0,"undefined"==typeof SCREEN_Y_OFFSET?l.SCREEN_Y_OFFSET:SCREEN_Y_OFFSET]))}return null},1,[null,null,["self"],
["debug"]]);n._draw_grid=k;k=$pyjs__bind_method2("update",function(b,c,a){if(!0===this.__is_instance__)var d=this;else d=b,b=c,c=a;var f,g,e;d._draw_grid(b);d.update_block(b,c);if(null===(g=0===(e=null===(f=d.block_list)?0:"undefined"!=typeof f.__array?f.__array.length:"function"==typeof f.__len__?f.__len__():"undefined"!=typeof f.length?f.length:$p.len(f))&&null===e?!0:null===e?!1:"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.__cmp__?0==e:0===e.__cmp__(0))||!1===g||0===g||""===g?
0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?0<g.__len__():1:1)d.block_list=$p.list($p.range(1,8));return null},1,[null,null,["self"],["debug"],["dt"]]);n.update=k;k=$pyjs__bind_method2("print_grid",function(b){var c,a,d;b=$p.range(null===(c=(!0===this.__is_instance__?this:b).grid)?0:"undefined"!=typeof c.__array?c.__array.length:"function"==typeof c.__len__?c.__len__():"undefined"!=typeof c.length?c.length:$p.len(c));"undefined"!=typeof(d=b.__array)?
c=0:(b=b.__iter__(),c="undefined"!=typeof(d=b.__array)?0:"function"==typeof b.$genfunc?1:-1);for(a=0;"undefined"!=typeof(c?0<c?b.next(!0,!1):$p.wrapped_next(b):d[a++]););return null},1,[null,null,["self"]]);n.print_grid=k;k=Array(pyjslib.object);var I=$p.dict(),V;for(V in n)I.__setitem__(V,n[V]);return $p._create_class("Grid",$p.tuple(k),I)}();return this};
